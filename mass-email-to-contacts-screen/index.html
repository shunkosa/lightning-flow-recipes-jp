<!doctype html><html lang=ja>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="取引先に紐づく取引先責任者に対して固定の一括メールを送信するサンプルのフローです。条件分岐や、コレクション変数、ループの使い方を学べます。
使い方 #  フローを有効化し、このフローを使用して取引先のクイックアクションを新規作成するか、取引先の Lightning ページにフローを配置します。デバッグで起動する場合は recordId に任意の取引先のレコードを選択してください。
ポイント #  [決定] 要素 #  このフローでは、取引先の[業種] に値が設定されているときだけ確認メッセージを表示しメール送信でき、値が設定されていない場合は、メールを送信できない旨のメッセージを表示する画面に遷移します。このように、フロー内で条件分岐を設定する場合には、[決定] 要素を使用します。
[結果] の表示ラベルは、[決定] 要素と他の要素をつなぐ際、線の上に表示されますので、分かりやすい表示ラベルをつけるようにしましょう。
コレクション変数 #  コレクション変数は、複数の値を保持することができる変数です。[レコードの取得] 要素で、すべてのレコードを選択した場合、その結果はコレクション変数として保存されます。このフローでは、(1つの) get_Contacts コレクション変数内に複数の取引先責任者レコード変数が含まれています。
ループ #  コレクション変数の中身を1つずつ取り出して処理を行いたい場合はループを用います。ループ要素の API 参照名 (ここでは loop_Contacts) は、コレクション変数に含まれる1つの変数を指しています。
メール送信 #  フローからメールを送信する場合は、[アクション要素] から [メールを送信] を選択します。詳細は Salesforce Help - フローコアアクション: メールを送信 を参照してください。
メール本文はアクションに直接記載するよりも、テキストテンプレートを使用すると良いでしょう。このとき、テキストテンプレートの種別はリッチテキストではなくテキストにします。(リッチテキストだと本文に HTML タグが挿入されてしまうため)">
<meta name=theme-color content="#FFFFFF"><meta property="og:title" content="取引先から取引先責任者に一括メールを送信する画面">
<meta property="og:description" content="取引先に紐づく取引先責任者に対して固定の一括メールを送信するサンプルのフローです。条件分岐や、コレクション変数、ループの使い方を学べます。
使い方 #  フローを有効化し、このフローを使用して取引先のクイックアクションを新規作成するか、取引先の Lightning ページにフローを配置します。デバッグで起動する場合は recordId に任意の取引先のレコードを選択してください。
ポイント #  [決定] 要素 #  このフローでは、取引先の[業種] に値が設定されているときだけ確認メッセージを表示しメール送信でき、値が設定されていない場合は、メールを送信できない旨のメッセージを表示する画面に遷移します。このように、フロー内で条件分岐を設定する場合には、[決定] 要素を使用します。
[結果] の表示ラベルは、[決定] 要素と他の要素をつなぐ際、線の上に表示されますので、分かりやすい表示ラベルをつけるようにしましょう。
コレクション変数 #  コレクション変数は、複数の値を保持することができる変数です。[レコードの取得] 要素で、すべてのレコードを選択した場合、その結果はコレクション変数として保存されます。このフローでは、(1つの) get_Contacts コレクション変数内に複数の取引先責任者レコード変数が含まれています。
ループ #  コレクション変数の中身を1つずつ取り出して処理を行いたい場合はループを用います。ループ要素の API 参照名 (ここでは loop_Contacts) は、コレクション変数に含まれる1つの変数を指しています。
メール送信 #  フローからメールを送信する場合は、[アクション要素] から [メールを送信] を選択します。詳細は Salesforce Help - フローコアアクション: メールを送信 を参照してください。
メール本文はアクションに直接記載するよりも、テキストテンプレートを使用すると良いでしょう。このとき、テキストテンプレートの種別はリッチテキストではなくテキストにします。(リッチテキストだと本文に HTML タグが挿入されてしまうため)">
<meta property="og:type" content="article">
<meta property="og:url" content="https://shunkosa.github.io/lightning-flow-recipes-jp/mass-email-to-contacts-screen/"><meta property="article:section" content>
<meta property="article:published_time" content="2020-02-28T00:00:00+00:00">
<meta property="article:modified_time" content="2020-02-28T00:00:00+00:00">
<title>取引先から取引先責任者に一括メールを送信する画面 | Salesforce Flow Recipes</title>
<link rel=manifest href=/lightning-flow-recipes-jp/manifest.json>
<link rel=icon href=/lightning-flow-recipes-jp/favicon.png type=image/x-icon>
<link href="https://fonts.googleapis.com/css?family=Noto+Sans+JP" rel=stylesheet>
<link rel=stylesheet href=/lightning-flow-recipes-jp/book.min.c43b596a4d60811469270724ebd1598ef06aa86a59d8945595ff128ed09c5fab.css integrity="sha256-xDtZak1ggRRpJwck69FZjvBqqGpZ2JRVlf8SjtCcX6s=">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ESEWC9RTQC"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-ESEWC9RTQC')</script>
<script defer src=/lightning-flow-recipes-jp/ja.search.min.8cbefdbe2581ced3fc492b4c1d0731ab4fb6de5e37ce6c66872ab608941d79a1.js integrity="sha256-jL79viWBztP8SStMHQcxq0+23l43zmxmhyq2CJQdeaE="></script>
</head>
<body>
<input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control>
<main class="container flex">
<aside class=book-menu>
<nav>
<h2 class=book-brand>
<a href=/lightning-flow-recipes-jp><span>Salesforce Flow Recipes</span>
</a>
</h2>
<div class=book-search>
<input type=text id=book-search-input placeholder=検索 aria-label=検索 maxlength=64 data-hotkeys=s/>
<div class="book-search-spinner hidden"></div>
<ul id=book-search-results></ul>
</div>
<ul>
<li><a href=/lightning-flow-recipes-jp/>トップページ・レシピ集</a></li>
<li><a href=/lightning-flow-recipes-jp/changelog/>リリースノート</a></li>
<li>補足
<ul>
<li><a href=/lightning-flow-recipes-jp/design-guideline/>実装時に気をつけると良いこと</a></li>
<li><a href=/lightning-flow-recipes-jp/unsupported-features/>レコードトリガフローの考慮事項</a>
<br></li>
</ul>
</li>
</ul>
<ul>
<li>
<a href=https://github.com/shunkosa/lightning-flow-recipes-jp/ target=_blank rel=noopener>
GitHub
</a>
</li>
</ul>
</nav>
<script>(function(){var a=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>
</aside>
<div class=book-page>
<header class=book-header>
<div class="flex align-center justify-between">
<label for=menu-control>
<img src=/lightning-flow-recipes-jp/svg/menu.svg class=book-icon alt=Menu>
</label>
<strong>取引先から取引先責任者に一括メールを送信する画面</strong>
<label for=toc-control>
<img src=/lightning-flow-recipes-jp/svg/toc.svg class=book-icon alt="Table of Contents">
</label>
</div>
<aside class="hidden clearfix">
<nav id=TableOfContents>
<ul>
<li><a href=#使い方>使い方</a></li>
<li><a href=#ポイント>ポイント</a>
<ul>
<li><a href=#決定-要素>[決定] 要素</a></li>
<li><a href=#コレクション変数>コレクション変数</a></li>
<li><a href=#ループ>ループ</a></li>
<li><a href=#メール送信>メール送信</a></li>
</ul>
</li>
</ul>
</nav>
</aside>
</header>
<article class=markdown>
<h1>取引先から取引先責任者に一括メールを送信する画面</h1><p>取引先に紐づく取引先責任者に対して固定の一括メールを送信するサンプルのフローです。条件分岐や、コレクション変数、ループの使い方を学べます。</p>
<p><img src=screenshot.png alt></p>
<h2 id=使い方>
使い方
<a class=anchor href=#%e4%bd%bf%e3%81%84%e6%96%b9>#</a>
</h2>
<p>フローを有効化し、このフローを使用して取引先のクイックアクションを新規作成するか、取引先の Lightning ページにフローを配置します。デバッグで起動する場合は <code>recordId</code> に任意の取引先のレコードを選択してください。</p>
<p><img src=mass_email_screens.png alt></p>
<h2 id=ポイント>
ポイント
<a class=anchor href=#%e3%83%9d%e3%82%a4%e3%83%b3%e3%83%88>#</a>
</h2>
<h3 id=決定-要素>
[決定] 要素
<a class=anchor href=#%e6%b1%ba%e5%ae%9a-%e8%a6%81%e7%b4%a0>#</a>
</h3>
<p>このフローでは、取引先の[業種] に値が設定されているときだけ確認メッセージを表示しメール送信でき、値が設定されていない場合は、メールを送信できない旨のメッセージを表示する画面に遷移します。このように、フロー内で条件分岐を設定する場合には、[決定] 要素を使用します。</p>
<p>[結果] の表示ラベルは、[決定] 要素と他の要素をつなぐ際、線の上に表示されますので、分かりやすい表示ラベルをつけるようにしましょう。</p>
<h3 id=コレクション変数>
コレクション変数
<a class=anchor href=#%e3%82%b3%e3%83%ac%e3%82%af%e3%82%b7%e3%83%a7%e3%83%b3%e5%a4%89%e6%95%b0>#</a>
</h3>
<p><img src=collection_variable.png alt></p>
<p>コレクション変数は、複数の値を保持することができる変数です。[レコードの取得] 要素で、すべてのレコードを選択した場合、その結果はコレクション変数として保存されます。このフローでは、(1つの) <code>get_Contacts</code> コレクション変数内に複数の取引先責任者レコード変数が含まれています。</p>
<p><img src=collection_variable_illustrative.png alt></p>
<h3 id=ループ>
ループ
<a class=anchor href=#%e3%83%ab%e3%83%bc%e3%83%97>#</a>
</h3>
<p>コレクション変数の中身を1つずつ取り出して処理を行いたい場合はループを用います。ループ要素の API 参照名 (ここでは <code>loop_Contacts</code>) は、コレクション変数に含まれる1つの変数を指しています。</p>
<p><img src=loop_illustrative.png alt></p>
<h3 id=メール送信>
メール送信
<a class=anchor href=#%e3%83%a1%e3%83%bc%e3%83%ab%e9%80%81%e4%bf%a1>#</a>
</h3>
<p>フローからメールを送信する場合は、[アクション要素] から [メールを送信] を選択します。詳細は <a href="https://help.salesforce.com/apex/HTViewHelpDoc?id=flow_ref_elements_actions_sendemail.htm&language=ja">Salesforce Help - フローコアアクション: メールを送信</a> を参照してください。</p>
<p><img src=email_action_and_text_template.png alt></p>
<p>メール本文はアクションに直接記載するよりも、テキストテンプレートを使用すると良いでしょう。このとき、テキストテンプレートの種別はリッチテキストではなくテキストにします。(リッチテキストだと本文に HTML タグが挿入されてしまうため)</p>
</article>
<footer class=book-footer>
<div class="flex flex-wrap justify-between">
</div>
</footer>
<div class=book-comments>
</div>
<label for=menu-control class="hidden book-menu-overlay"></label>
</div>
<aside class=book-toc>
<nav id=TableOfContents>
<ul>
<li><a href=#使い方>使い方</a></li>
<li><a href=#ポイント>ポイント</a>
<ul>
<li><a href=#決定-要素>[決定] 要素</a></li>
<li><a href=#コレクション変数>コレクション変数</a></li>
<li><a href=#ループ>ループ</a></li>
<li><a href=#メール送信>メール送信</a></li>
</ul>
</li>
</ul>
</nav>
</aside>
</main>
</body>
</html>