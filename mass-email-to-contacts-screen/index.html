<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Hugo 0.67.0"><link rel=stylesheet href=https://shunkosa.github.io/lightning-flow-recipes-jp/css/normalize.css><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel=stylesheet type=text/css><link rel=stylesheet href=https://shunkosa.github.io/lightning-flow-recipes-jp/css/cayman.777b53fa3f62e772b9a603f46693ea87c8c32312636996ca131bb8699bd70a90.css><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><title>取引先から取引先責任者に一括メールを送信する画面 | Lightning Flow Recipes</title></head><body><section class=page-header><h1 class=project-name>Lightning Flow Recipes</h1><h2 class=project-tagline>インストールして編集可能な Lightning フローのパッケージです⚡️🛠</h2><nav><a href=/lightning-flow-recipes-jp/ class=btn>Home</a>
<a href=/lightning-flow-recipes-jp/changelog class=btn>Release Note</a>
<a href=https://github.com/shunkosa/lightning-flow-recipes-jp/ class=btn>View on GitHub</a></nav></section><section class=main-content><h1>取引先から取引先責任者に一括メールを送信する画面</h1><p>取引先に紐づく取引先責任者に対して固定の一括メールを送信するサンプルのフローです。条件分岐や、コレクション変数、ループの使い方を学べます。</p><p><img src=screenshot.png alt></p><h2 id=使い方>使い方</h2><p>フローを有効化し、このフローを使用して取引先のクイックアクションを新規作成するか、取引先の Lightning ページにフローを配置します。デバッグで起動する場合は <code>recordId</code> に取引先のレコード ID を入力してください。</p><p><img src=mass_email_screens.png alt></p><h2 id=ポイント>ポイント</h2><h3 id=決定-要素>[決定] 要素</h3><p>このフローでは、取引先の[業種] に値が設定されているときだけ確認メッセージを表示しメール送信でき、値が設定されていない場合は、メールを送信できない旨のメッセージを表示する画面に遷移します。このように、フロー内で条件分岐を設定する場合には、[決定] 要素を使用します。</p><p>[結果] の表示ラベルは、[決定] 要素と他の要素をつなぐ際、線の上に表示されますので、分かりやすい表示ラベルをつけるようにしましょう。</p><h3 id=コレクション変数>コレクション変数</h3><p><img src=collection_variable.png alt></p><p>コレクション変数は、複数の値を保持することができる変数です。[レコードの取得] 要素で、すべてのレコードを選択した場合、その結果はコレクション変数として保存されます。このフローでは、(1つの) <code>get_Contacts</code> コレクション変数内に複数の取引先責任者レコード変数が含まれています。</p><p><img src=collection_variable_illustrative.png alt></p><h3 id=ループ>ループ</h3><p>コレクション変数の中身を1つずつ取り出して処理を行いたい場合はループを用います。ループ要素の設定で指定した [ループ変数] には、コレクション変数に含まれる1つの変数を指しています。</p><p><img src=loop_illustrative.png alt></p><h3 id=メール送信>メール送信</h3><p>フローからメールを送信する場合は、[アクション要素] から [メールを送信] を選択します。詳細は <a href="https://help.salesforce.com/apex/HTViewHelpDoc?id=flow_ref_elements_actions_sendemail.htm&language=ja">Salesforce Help - フローコアアクション: メールを送信</a> を参照してください。</p><p><img src=email_action_and_text_template.png alt></p><p>メール本文はアクションに直接記載するよりも、テキストテンプレートを使用すると良いでしょう。このとき、テキストテンプレートの種別はリッチテキストではなくテキストにします。(リッチテキストだと本文に HTML タグが挿入されてしまうため)</p><footer class=site-footer><span class=site-footer-credits></span></footer></section></body></html>